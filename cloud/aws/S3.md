# AWS S3 Storage Notes

## What is S3?

Amazon S3 (Simple Storage Service) is AWS's object storage service. It stores data as objects within buckets, where each object consists of:
- Data (the file itself)
- Metadata (information about the file)
- Unique identifier (key)

S3 is designed for 99.999999999% (11 nines) durability and scales automatically.

## Object Storage vs. Block/File Storage

**Object Storage (S3)** treats each file as a discrete object with metadata. You access objects via HTTP/HTTPS using REST APIs. Objects are immutable - you replace entire objects rather than editing parts. Flat structure with no real directories (though you can simulate folders with key naming).

**Block Storage** provides raw storage volumes that can be formatted and mounted as file systems. An example would be AWS EBS (Elastic Block Store), which is better for databases and applications needing low-latency access.

**File Storage** provides hierarchical file systems with directory structures. An example would be AWS EFS (Elastic File System), which is good for shared access scenarios.

S3's object storage model excels at storing static content, backups, media files, and serving web assets, but isn't suitable for databases or applications that need to modify parts of files. **S3 uses object storage exclusively.** The other storage types are different AWS services provided for contrast.

## S3 Costs

S3 pricing varies by storage class, but for Standard storage:
- Storage: ~$0.023/GB/month
- PUT/POST requests: ~$0.005 per 1000 requests
- GET requests: $0.0004 per 1000 requests
- Data transfer out: First 1GB free/month, then ~$0.09/GB
- Data transfer in: Free

For static website hosting, costs are typically very low for small to medium traffic sites. Using CloudFront as a CDN can reduce costs through caching and includes a generous free tier.

## Storage Classes

S3 offers different storage classes optimized for various access patterns and costs:

### S3 Standard
- General-purpose storage for frequently accessed data
- Low latency, high throughput
- Most expensive per GB, but no retrieval fees
- Use for: Active data, websites, content distribution

### S3 Standard-IA (Infrequent Access)
- For data accessed less frequently but needs rapid access when required
- Lower storage cost than Standard, but charges for retrieval
- Use for: Backups, disaster recovery files, older data

### S3 One Zone-IA
- Like Standard-IA but stores data in a single AZ (less redundancy)
- 20% cheaper than Standard-IA
- Use for: Reproducible data, secondary backups

### S3 Glacier Instant Retrieval
- For archive data that needs immediate access
- Cheapest for long-term storage with instant retrieval
- Use for: Medical images, news media archives

### S3 Glacier Flexible Retrieval
- Archive storage with retrieval times from minutes to hours
- Very cheap storage
- Use for: Long-term backups, compliance archives

### S3 Glacier Deep Archive
- Lowest cost storage for data accessed once or twice a year
- Retrieval time: 12-48 hours
- Use for: Regulatory archives, long-term preservation

### S3 Intelligent-Tiering
- Automatically moves objects between access tiers based on usage patterns
- Small monitoring fee but can save money on unpredictable workloads

## Static Website Hosting

S3 can host static websites directly. A **static website** consists of fixed files (HTML, CSS, JavaScript, images) that are served to users exactly as storedâ€”there's no server-side processing, database queries, or dynamic content generation happening on the server. The web server simply returns the requested files.

This makes S3 perfect for:
- React SPAs (which run JavaScript in the browser)
- HTML/CSS/JS sites
- Other client-side applications

Even though React apps are interactive and feel "dynamic," they're still static from the hosting perspective. All the interactivity happens in the user's browser via JavaScript, not on the server. The server just delivers the files.

### Deploying a React SPA - Setup Steps

1. **Create a bucket** with a name matching your domain (optional but helpful)
2. **Upload your build files** (for React: contents of `build/` or `dist/` folder)
3. **Enable static website hosting** in bucket properties
   - Specify index document (usually `index.html`)
   - Optionally specify error document
4. **Configure bucket permissions** - make objects publicly readable
5. **Access via S3 endpoint** (e.g., `bucket-name.s3-website-region.amazonaws.com`)

### React SPA Considerations

**Routing:** React Router uses client-side routing. Configure the error document to also point to `index.html` so routes work correctly when accessed directly.

**Build Process:** Run `npm run build` (or equivalent) to create optimized production bundles before uploading.

**File Structure:** Upload the entire contents of your build directory, maintaining the folder structure.

**CORS:** If your app makes API calls to other domains, configure CORS headers on those services.

### Performance & CDN

For better performance and custom domains:
- Use **CloudFront** (AWS's CDN) in front of S3
- Configure CloudFront to cache content at edge locations
- Set up custom domain with Route 53
- Add SSL certificate via AWS Certificate Manager

### Deployment

Manual deployment: Use AWS Console or CLI (`aws s3 sync build/ s3://bucket-name`)

Automated: Set up CI/CD pipelines with GitHub Actions, GitLab CI, or AWS CodePipeline to deploy on push.
